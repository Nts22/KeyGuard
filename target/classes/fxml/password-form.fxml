<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<ScrollPane xmlns="http://javafx.com/javafx/17"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.passmanager.controller.PasswordFormController"
            fitToWidth="true" prefWidth="550" prefHeight="650"
            style="-fx-background-color: white;">

    <VBox spacing="18" style="-fx-background-color: white;">
        <padding>
            <Insets top="25" right="25" bottom="25" left="25"/>
        </padding>

        <!-- TÃ­tulo -->
        <VBox spacing="6">
            <Label text="TÃ­tulo *" styleClass="field-label"/>
            <TextField fx:id="titleField" promptText="Ej: Netflix, Gmail, Banco..."/>
        </VBox>

        <!-- CategorÃ­a -->
        <VBox spacing="6">
            <Label text="CategorÃ­a" styleClass="field-label"/>
            <ComboBox fx:id="categoryCombo" promptText="Selecciona una categorÃ­a" maxWidth="Infinity"/>
        </VBox>

        <!-- Usuario y Email -->
        <HBox spacing="20">
            <VBox spacing="6" HBox.hgrow="ALWAYS">
                <Label text="Usuario" styleClass="field-label"/>
                <TextField fx:id="usernameField" promptText="Nombre de usuario"/>
            </VBox>
            <VBox spacing="6" HBox.hgrow="ALWAYS">
                <Label text="Email" styleClass="field-label"/>
                <TextField fx:id="emailField" promptText="correo@ejemplo.com"/>
            </VBox>
        </HBox>

        <!-- ContraseÃ±a -->
        <VBox spacing="10">
            <Label text="ContraseÃ±a *" styleClass="field-label"/>
            <HBox fx:id="passwordContainer" spacing="10">
                <PasswordField fx:id="passwordField" promptText="ContraseÃ±a" HBox.hgrow="ALWAYS"/>
                <TextField fx:id="passwordFieldVisible" promptText="ContraseÃ±a" visible="false" managed="false" HBox.hgrow="ALWAYS"/>
                <Button fx:id="togglePasswordBtn" text="ðŸ‘" onAction="#handleTogglePassword"
                        styleClass="button-secondary" prefWidth="50" style="-fx-font-size: 16px;"/>
                <Button text="Generar" onAction="#handleOpenGenerator" prefWidth="90"/>
            </HBox>

            <!-- Barra de fortaleza -->
            <HBox spacing="10" alignment="CENTER_LEFT">
                <ProgressBar fx:id="strengthBar" prefWidth="200" prefHeight="8"/>
                <Label fx:id="strengthLabel" text="" styleClass="field-label"/>
            </HBox>
        </VBox>

        <!-- URL -->
        <VBox spacing="6">
            <Label text="URL" styleClass="field-label"/>
            <TextField fx:id="urlField" promptText="https://ejemplo.com"/>
        </VBox>

        <!-- Notas -->
        <VBox spacing="6">
            <Label text="Notas" styleClass="field-label"/>
            <TextArea fx:id="notesField" promptText="Notas adicionales..." prefRowCount="3"/>
        </VBox>

        <!-- Campos personalizados -->
        <VBox fx:id="customFieldsContainer" spacing="10">
            <HBox alignment="CENTER_LEFT">
                <Label text="Campos Personalizados" styleClass="field-label"/>
                <Region HBox.hgrow="ALWAYS"/>
                <Button text="+ Agregar Campo" onAction="#handleAddCustomField"
                        styleClass="button-secondary" style="-fx-font-size: 12px; -fx-padding: 6 12;"/>
            </HBox>
        </VBox>

        <!-- Mensaje de error -->
        <Label fx:id="errorLabel" styleClass="error-label" visible="false"/>

        <!-- Botones -->
        <HBox spacing="15" alignment="CENTER_RIGHT">
            <padding>
                <Insets top="15"/>
            </padding>
            <Button text="Cancelar" onAction="#handleCancel" styleClass="button-secondary" prefWidth="100"/>
            <Button fx:id="saveButton" text="Guardar" onAction="#handleSave" prefWidth="100"/>
        </HBox>
    </VBox>
</ScrollPane>
